<?php
/**
 * Created by PhpStorm.
 * User: catha
 * Date: 16-9-19
 * Time: 下午9:29
 */


function doCurlGetRequest($url, $data, $timeout = 5){
//    $url = $url . '?' . http_bulid_query($data);

    header("Content-type:text/html;Charset=utf8");
    $ce = 'Cookie:BIDUPSID=A2D841BF4CCE5BCDB0D7E36E16BACB27; PSTM=1468135844; __cfduid=d0034d47d032771f949a5a4185ed713d91469157503; Hm_lvt_c864ea3a5eaa71051595075c197093b8=1472387525; H_WISE_SIDS=100617_100122_102480_102431_109814_100097_109550_104340_108051_106435_108580_108375_109794_108412_109774_107960_108454_109738_109891_109531_109505_107896_109682_109498_107806_109570_108013_108298_108075_107314_107242_109658_100458; BAIDUID=A2D841BF4CCE5BCDB0D7E36E16BACB27:FG=1; BCLID=4957887970433612875; BDRCVFR[LU82KGD_P9m]=mbxnW11j9Dfmh7GuZR8mvqV; BDSFRCVID=tfIsJeCCxG3CehRRYdYybDS20KgOyQByAGkn3J; H_BDCLCKID_SF=tJ4OVID-tKvKetOv5J5jbDCVbqbJb-ojKKb0WJD8Kb7VbnRwynbkbftd2-tetjttKHuD0UnsKqrao-nkKnQN5pQ3htvUL5JZfJAfoCK2tIP3fJrYhPI_-PAt-U4Xat0XKKOLVK5VJPOkeqOJ2Mt5hbDw-n5EblRuWHnU2T6la4c-8-n-QfOj55tpeGKJtj_jJJCsL-35HJjVHtcvhCTjh6PdW-veBtQm05bxobRT2toCsCT65bL2M-u_efovKUje-C8DLfDbWDF5MIDGj50WenLHMfnXetJQ2C7WsJceHJOoDDkzW6O5y4LdLp7xJ552yGnNKf59af05fMjC0tc05xAb04oR5b0eWJLDVCt2fI-KMIv4btOEK4LS52Tea4raK4oJ3R7tKRA_Hn7zep5xLntpbt-qJJbH2NbbbfowbpKMj-jm-DcJ5lIAeaJnBT5KW6n-sR5zWpLBfq_6bU6D5qKkQN3TKfuO5bRiLRodbqoMDn3oyT3qXp0nMNjTqjF8fR4toDIQKbREHnkk2t7fq4tehHRee6veWDTm5-nTthOkV4o-WJOp0KuAjG3D0Pb9MG6GXljT2bu5OCFweju2jjj-eUbQa4JWHj530TrJabC3fbQVKU6qLUtbQNbmK4vNLH5bh4Tt3U8KhhvTXnrGLRFFQURXJMIEK5r2SC8yJDDW3J; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; H_PS_PSSID=1425_17947_21083_21193_21160_20930; PHPSESSID=63i8qr6rf4mfd4cbiib58jno26; YII_CSRF_TOKEN=ad75df862eb39b4d19df31c702d5ccbff6a6db9a; Hm_lvt_b766d3667342a43e1042c0777220ab13=1474293802; Hm_lpvt_b766d3667342a43e1042c0777220ab13=1474293802; BDUSS=h5M0RuZi02SGZacEFSTk1wTEU4Un5kSTRBREJNaGNieHVjUHF6cE1xcERmUWRZQVFBQUFBJCQAAAAAAAAAAAEAAACLxT5W0e7c59S9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEPw31dD8N9Xfl; Hm_lvt_ee067321f257787b74d66558f6cd5733=1471933127,1472387501,1474293796; Hm_lpvt_ee067321f257787b74d66558f6cd5733=1474293863; Hm_lvt_094fdfd158142b2b5a2c9fc3ac3e454a=1471933127,1472387501,1474293796; Hm_lpvt_094fdfd158142b2b5a2c9fc3ac3e454a=1474293863; Hm_lvt_5d1b7319dd4276dedce8695c91e8a86c=1471933127,1472387501,1474293796; Hm_lpvt_5d1b7319dd4276dedce8695c91e8a86c=1474293863; BEC=BA8D7034F197C1043CF66D1EB716DE9F|V9/wd|V9/wJ';
    $con = curl_init((string)$url);
    curl_setopt($con, CURLOPT_HEADER, false);
    curl_setopt($con, CURLOPT_RETURNTRANSFER,true);
    curl_setopt($con, CURLOPT_TIMEOUT, (int)$timeout);
    curl_setopt($con, CURLOPT_COOKIE, $ce);
    return json_decode(curl_exec($con), true);
}



function mockPost($url) {
    $ce = 'bdshare_firstime=1455422000221; CNZZDATA1254800170=998827881-1464932040-http%253A%252F%252Ftest.baidu.com%252F%7C1464932040; 56291___841299_KS_56291___841299=00e87ad3c32d40faaaebbcde14d81c57; Hm_lvt_84f7b5c2b746b2972cbaad9088a7fa53=1464939814,1464940088; 56291___841299_KS_visitPages=1; 56291___841299_KS_visitCounts=1; 56291___841299_KS_preVisitPages=0; 56291___841299_KS_lastVisitTime=1464940087313; 56291___841299_KS_firstVisitTime=1464940087313; Hm_lvt_5a628fa66251ccace84659b5a1128f97=1464940135; BAIDUID=64F84CCDB1463F1D8BC2B9ADAB5B5C2D:FG=1; PSTM=1467716577; BIDUPSID=666FE8032F3A6AEA0F972C32F62E55DB; PHPSESSID=0iugeifi3bp2r9em241ms6g104; YII_CSRF_TOKEN=76d8951f56a5d362dae6dee73393b5abab60c95d; Hm_lvt_b766d3667342a43e1042c0777220ab13=1473072882,1474289130; Hm_lpvt_b766d3667342a43e1042c0777220ab13=1474289132; BDUSS=N2SXloZlNGQVBETklyen5GM243QXpQZ20zME1mYS1SdUZibVNmelJPSDRhZ2RZQVFBQUFBJCQAAAAAAAAAAAEAAACw1CgpbHljYXRoYXkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPjd31f43d9XdW; H_PS_PSSID=19637_1440_18240_17942_21104_17001_21190_21161_20927; Hm_lvt_ee067321f257787b74d66558f6cd5733=1472279658,1473073040,1474289149; Hm_lpvt_ee067321f257787b74d66558f6cd5733=1474294506; Hm_lvt_094fdfd158142b2b5a2c9fc3ac3e454a=1472279658,1473072882,1474289130; Hm_lpvt_094fdfd158142b2b5a2c9fc3ac3e454a=1474294506; Hm_lvt_5d1b7319dd4276dedce8695c91e8a86c=1472279658,1473072882,1474289130; Hm_lpvt_5d1b7319dd4276dedce8695c91e8a86c=1474294506; BEC=BA8D7034F197C1043CF66D1EB716DE9F|V9/y+|V9/ys';

    header('application/x-www-form-urlencoded; charset=UTF-8');
    //初始化
    $curl = curl_init();
    //设置抓取的url
    curl_setopt($curl, CURLOPT_URL, 'http://www.baidu.com');
    //设置头文件的信息作为数据流输出
    curl_setopt($curl, CURLOPT_HEADER, 1);
    //设置获取的信息以文件流的形式返回，而不是直接输出。
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    //设置post方式提交
    curl_setopt($curl, CURLOPT_POST, 1);
    //设置post数据
    $post_data = array(
        "username" => "coder",
        "password" => "12345"
    );
    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);
    //执行命令
    $data = curl_exec($curl);
    //关闭URL请求
    curl_close($curl);
    //显示获得的数据
    print_r($data);
}

$url = 'http://test.baidu.com/mark/task/enter';
$url = 'http://cp01-crowdtest-mark-script.epc.baidu.com:8888/mark/sampleTaskManage/publish';
var_dump(mockPost($url));